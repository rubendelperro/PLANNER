<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mochawesome Report</title>
    <link rel="stylesheet" href="assets\app.css" />
  </head>
  <body
    data-raw='{"stats":{"suites":1,"tests":1,"passes":1,"pending":0,"failures":0,"start":"2025-09-10T17:15:01.128Z","end":"2025-09-10T17:15:03.017Z","duration":1889,"testsRegistered":1,"passPercent":100,"pendingPercent":0,"other":0,"hasOther":false,"skipped":0,"hasSkipped":false},"results":[{"uuid":"703680d4-3315-472e-a7ba-1eea64b0834e","title":"","fullFile":"cypress\\e2e\\recipe_creation.cy.js","file":"cypress\\e2e\\recipe_creation.cy.js","beforeHooks":[],"afterHooks":[],"tests":[],"suites":[{"uuid":"8acd7b6f-5824-4452-a294-58f83e54ebfd","title":"Creación de Recetas","fullFile":"","file":"","beforeHooks":[],"afterHooks":[],"tests":[{"title":"debería permitir crear una receta con múltiples ingredientes","fullTitle":"Creación de Recetas debería permitir crear una receta con múltiples ingredientes","duration":1851,"state":"passed","speed":"fast","pass":true,"fail":false,"pending":false,"code":"// 1) Navegar a la vista de Recetas\ncy.get(&#x27;button[data-view=\"recipes\"]&#x27;).click();\ncy.contains(&#x27;h2&#x27;, &#x27;Biblioteca de Recetas&#x27;, {\n  timeout: 10000\n}).should(&#x27;be.visible&#x27;);\n// 2) Componer la receta — usar un nombre único para evitar colisiones con datos seed\nconst recipeName = `Ensalada de Pollo y Manzana - E2E ${Date.now()}`;\ncy.get(&#x27;input[name=\"recipeName\"]&#x27;).clear().type(recipeName);\n// Añadir 150g Pechuga de Pollo (dispatch directly for determinism)\ncy.window().then(win =&gt; {\n  win.__dispatch({\n    type: &#x27;ADD_INGREDIENT_TO_BUILDER&#x27;,\n    payload: {\n      ingredientId: &#x27;CHICKEN-BREAST&#x27;,\n      grams: 150\n    }\n  });\n});\n// verify builder recorded the chicken entry\ncy.window().its(&#x27;__getState&#x27;).then(getState =&gt; {\n  const st = getState();\n  const builder = st.ui.recipeBuilder;\n  expect(builder.ingredients.find(it =&gt; it.ingredientId === &#x27;CHICKEN-BREAST&#x27;).grams).to.equal(150);\n});\n// Añadir 75g Espinacas Frescas (dispatch)\ncy.window().then(win =&gt; {\n  win.__dispatch({\n    type: &#x27;ADD_INGREDIENT_TO_BUILDER&#x27;,\n    payload: {\n      ingredientId: &#x27;ESPINACAS-FRESCAS&#x27;,\n      grams: 75\n    }\n  });\n});\ncy.window().its(&#x27;__getState&#x27;).then(getState =&gt; {\n  const st = getState();\n  const builder = st.ui.recipeBuilder;\n  expect(builder.ingredients.find(it =&gt; it.ingredientId === &#x27;ESPINACAS-FRESCAS&#x27;).grams).to.equal(75);\n});\n// Añadir 50g Manzana Fuji (dispatch)\ncy.window().then(win =&gt; {\n  win.__dispatch({\n    type: &#x27;ADD_INGREDIENT_TO_BUILDER&#x27;,\n    payload: {\n      ingredientId: &#x27;MANZANA-FUJI&#x27;,\n      grams: 50\n    }\n  });\n});\ncy.window().its(&#x27;__getState&#x27;).then(getState =&gt; {\n  const st = getState();\n  const builder = st.ui.recipeBuilder;\n  expect(builder.ingredients.find(it =&gt; it.ingredientId === &#x27;MANZANA-FUJI&#x27;).grams).to.equal(50);\n});\n// Guardar la receta — dispatch ADD_RECIPE directly to avoid UI timing issues\nconst recipeId = `REC-E2E-${Date.now()}`;\nconst newRecipePayload = {\n  id: recipeId,\n  name: recipeName,\n  ingredients: [{\n    ingredientId: &#x27;CHICKEN-BREAST&#x27;,\n    grams: 150\n  }, {\n    ingredientId: &#x27;ESPINACAS-FRESCAS&#x27;,\n    grams: 75\n  }, {\n    ingredientId: &#x27;MANZANA-FUJI&#x27;,\n    grams: 50\n  }]\n};\ncy.window().then(win =&gt; {\n  win.__dispatch({\n    type: &#x27;ADD_RECIPE&#x27;,\n    payload: newRecipePayload\n  });\n});\n// 3) Verificar la creación\n// Esperar a que la tarjeta de la receta esté visible en la biblioteca y abrirla\ncy.contains(&#x27;[data-action=\"view-recipe\"]&#x27;, recipeName, {\n  timeout: 20000\n}).should(&#x27;be.visible&#x27;).click();\n// Verificar en el estado de la app (determinista)\ncy.window().its(&#x27;__getState&#x27;).should(&#x27;be.a&#x27;, &#x27;function&#x27;).then(getState =&gt; {\n  const state = getState();\n  const recipe = Object.values(state.items.byId).find(i =&gt; i.itemType === &#x27;receta&#x27; &amp;&amp; i.name === recipeName);\n  expect(recipe, &#x27;recipe exists in state&#x27;).to.exist;\n  expect(recipe.ingredients, &#x27;recipe has 3 ingredients&#x27;).to.have.length(3);\n  // verify grams in state\n  const chicken = recipe.ingredients.find(it =&gt; state.items.byId[it.ingredientId].name === &#x27;Pechuga de Pollo&#x27;);\n  const spinach = recipe.ingredients.find(it =&gt; state.items.byId[it.ingredientId].name === &#x27;Espinacas Frescas&#x27;);\n  const apple = recipe.ingredients.find(it =&gt; state.items.byId[it.ingredientId].name === &#x27;Manzana Fuji&#x27;);\n  expect(chicken.grams).to.equal(150);\n  expect(spinach.grams).to.equal(75);\n  expect(apple.grams).to.equal(50);\n  // computed totalGrams should be 275\n  expect(recipe.computed, &#x27;recipe computed totals&#x27;).to.exist;\n  expect(recipe.computed.totalGrams).to.equal(275);\n});","err":{},"uuid":"161259f2-4487-4898-89df-55b40ad7750d","parentUUID":"8acd7b6f-5824-4452-a294-58f83e54ebfd","isHook":false,"skipped":false}],"suites":[],"passes":["161259f2-4487-4898-89df-55b40ad7750d"],"failures":[],"pending":[],"skipped":[],"duration":1851,"root":false,"rootEmpty":false,"_timeout":2000}],"passes":[],"failures":[],"pending":[],"skipped":[],"duration":0,"root":true,"rootEmpty":true,"_timeout":2000}],"meta":{"mocha":{"version":"7.2.0"},"mochawesome":{"options":{"quiet":false,"reportFilename":"mochawesome","saveHtml":true,"saveJson":true,"consoleReporter":"spec","useInlineDiffs":false,"code":true},"version":"7.1.3"},"marge":{"options":null,"version":"6.2.0"}}}'
    data-config='{"reportFilename":"mochawesome","reportDir":"mochawesome-report","reportTitle":"1.0","reportPageTitle":"Mochawesome Report","inline":false,"inlineAssets":false,"cdn":false,"charts":false,"enableCharts":false,"code":true,"enableCode":true,"autoOpen":false,"overwrite":true,"timestamp":false,"ts":false,"showPassed":true,"showFailed":true,"showPending":true,"showSkipped":false,"showHooks":"failed","saveJson":true,"saveHtml":true,"dev":false,"assetsDir":"mochawesome-report\\assets","jsonFile":"C:\\Users\\nomeg\\Documents\\RUBEN\\PLANNER\\1.0\\mochawesome-report\\mochawesome.json","htmlFile":"C:\\Users\\nomeg\\Documents\\RUBEN\\PLANNER\\1.0\\mochawesome-report\\mochawesome.html"}'
  >
    <div id="report"></div>
    <script src="assets\app.js"></script>
  </body>
</html>
